<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no"><title>Exam System</title><link rel="stylesheet" href="../assets/bootstrap/css/bootstrap.min.css?h=b3e4e725b0976ce461d98636404978a1"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Acme&amp;display=swap"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Alatsi&amp;display=swap"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab:300,400|Roboto:300,400,700"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab:300,400|Roboto:300,400,700"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700"><link rel="stylesheet" href="../assets/fonts/font-awesome.min.css?h=f884b94d2130eed5937399c725be18b1"><link rel="stylesheet" href="../assets/css/styles.min.css?h=e1a3a608af3c069aab134589e13950fb"></head><body style="background: #f1f7fc;"><ul class="nav nav-tabs"><li class="nav-item"><a class="nav-link active" href="/admin/questions">Questions</a></li><li class="nav-item"><a class="nav-link" href="/admin/exams">Exams</a></li><li class="nav-item"><a class="nav-link" href="/admin/dashboard">Main Panel</a></li><li class="nav-item"><a class="nav-link" href="/admin/users">Users</a></li><li class="nav-item"><a class="nav-link" href="/admin/quizs">Quizs</a></li><li class="nav-item"><a class="nav-link" href="/api/do-logout">Log Out</a></li></ul><div class="modal fade" id="add_data_Modal" role="dialog" tabindex="-1"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><h4 class="modal-title">Question Detail</h4><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body"><div class="row"><div class="col-sm-3 col-lg-4" style="height: 30px;width: 140px;">
    <form method="post" enctype="multipart/form-data" id="insert_form">
    <p style="width: 140px;">Quiz ID</p></div><div class="col-lg-8" style="width: 324.656px;"><input type="text" name="newquizid" id="newquizid" style="width: 300px;height: 20px;"></div></div>
    
    <div class="row"><div class="col-sm-3 col-lg-4" style="height: 30px;width: 140px;">
     <p style="width: 140px;">Description</p></div><div class="col-lg-8" style="width: 324.656px;"><input type="text" id="newdescription" name="newdescription" style="width: 300px;height: 20px;"></div></div>
    <div class="row"><div class="col-sm-3 col-lg-4" style="height: 30px;width: 140px;">
        <p>Image</p></div><div class="col-lg-8" style="width: 324.656px;"><input type="file" id="newimage" name="newimage" style="height: 35px;"></div></div>
                <input type="hidden" name="newquestionid" id="newquestionid" value=""/>
                <div class="row"><div class="col-sm-3 col-lg-4" style="height: 30px;width: 140px;">
                    <p style="width: 140px;">Correct Answer</p></div><div class="col-lg-8" style="width: 324.656px;"><input type="text" id="newcorrectanswer" name="newcorrectanswer" style="width: 300px;height: 20px;"></div></div><div class="row"><div class="col-sm-3 col-lg-4" style="height: 30px;width: 140px;">
                        <p style="width: 140px;">Question Number</p></div><div class="col-lg-8" style="width: 324.656px;"><input type="text" id="newquestionnumber" name="newquestionnumber" style="width: 300px;height: 20px;"></div></div></div><div class="modal-footer"><button class="btn btn-danger" onclick="Sil()" type="button">Delete</button><input type="submit" name="insert" id="insert" value="Create" class="btn btn-success" /></button></div></div></div></div>
                    </form>
                        <h3 align="center" style="margin-top: 10px">Question List</h3>
                        <div align="center">  
                              <button type="button" name="add" id="add" class="btn btn-warning">Add Question</button>  
                         </div>				
                    <br />
                    <div class="container"> 
                        <div class="table-responsive"> 
									
                            <table id="questiondata" class="table table-striped table-bordered">  
                                 <thead>  
                                      <tr>  
                                           <td>Quiz ID</td>
                                           <td>Description</td>  
                                           <td>Correct Answer</td>
                                           <td>Question Number</td>
                                           <td>Create Date</td>  
                                           <td width="13%">Edit Question</td>
                                      </tr>          
                                 </thead>  
                                 <% for(var i = 0; i < questions.length; i++) { %>  
                                    <tr>
                                        <td><%= questions[i].quizid %></td>
                                        <td><%= questions[i].description %></td>
                                        <td><%= questions[i].correctanswer %></td>
                                        <td><%= questions[i].questionnumber %></td> 
                                        <td><%= questions[i].createdate %></td>   
                                        <td><input type="button" style="padding: 5px" value="Edit Question" id="<%= questions[i].id %>" class="btn-secondary naim2"> </td>
                                   </tr> 
                                   <% } %>  
                                
                            </table>
                       </div>
                    </div>
                           

                        <script src="../assets/js/jquery.min.js?h=84e399b8f2181ccd73394fdeddff1638"></script><script src="../assets/bootstrap/js/bootstrap.min.js?h=19bbdecfa6ce3c33e1aa42dc000a8eb4"></script><script src="../assets/js/chart.min.js?h=f884b94d2130eed5937399c725be18b1"></script><script src="../assets/js/script.min.js?h=bc08a79abc02931c28c3cd0c5300ae33"></script>
                    
                        <script src="../assets/js/jquery.min.js?h=84e399b8f2181ccd73394fdeddff1638"></script><script src="../assets/bootstrap/js/bootstrap.min.js?h=19bbdecfa6ce3c33e1aa42dc000a8eb4"></script><script src="../assets/js/chart.min.js?h=f884b94d2130eed5937399c725be18b1"></script><script src="../assets/js/script.min.js?h=bc08a79abc02931c28c3cd0c5300ae33"></script>
                        <link rel="stylesheet" type="text/css" href="../assets/DataTables/datatables.min.css"/>
                        <script type="text/javascript" src="../assets/DataTables/datatables.min.js"></script>


                        <script>  
                            $(document).ready(function(){  
                                 $('#questiondata').DataTable();  
                            });  
                        </script>  

                        
<script>
	
    function Sil() {
         
         var questionid = $("input[name='newquestionid']").val();
         var quizid = $("input[name='newquizid']").val();
               $.ajax(
          {
          type: "POST",
          url: "/api/admin/deletequestiondata",
          headers: {"Authorization": 'Bearer ' + localStorage.getItem('jwt')},
          data: {'newquestionid': questionid, 'newquizid': quizid},
          
          success: function (response) {
                         if(response.status == true)
                         {
                              window.location.href = "/admin/questions"; 
                         }
                         else
                         {
                              alert(response.message);
                         }
               },
          
          });
   }
    
    $('#insert_form').on("submit", function(event){  
          event.preventDefault();
          var form = $('#insert_form')[0];
        var formData = new FormData(form);  
          if($('#newquestionnumber').val() == "")  
          {  
               alert("Question Number is required");  
          }  
          else if($('#newcorrectanswer').val() == "")  
          {  
               alert("Correct Answer is required");  
          }
          else  
          {
               $.ajax({  
                    url:"/api/admin/savequestiondata",  
                    method:"POST",
                    headers: {"Authorization": 'Bearer ' + localStorage.getItem('jwt')},  
                    data: formData,
                    processData: false,
                    contentType: false,
                    beforeSend:function(){  
                         $('#insert').val("Inserting");  
                    },  
                    success: function (response) {
                         $('#insert_form')[0].reset();  
                         $('#add_data_Modal').modal('hide'); 
                         if(response.status == true)
                         {
                              window.location.href = "/admin/questions"; 
                         }
                         else
                         {
                              alert(response.message);
                         }

                         
                    }  	 
               });  
          }  
     });  
    
    
    </script>

<script>
	
	$(document).ready(function(){  
      $('#add').click(function(){
		  
			$(".btn-danger").hide();
		   $("input[name='newquestionid']").val("");
           $('#insert').val("Insert");  
           $('#insert_form')[0].reset();  
           $("#add_data_Modal").modal('show');
      });  
	});
     </script>


                        <script>
  
                            $(document).on('click', '.naim2', function(){  
                                   var questionid = $(this).attr("id");  
                                   $(".btn-danger").show();
                                    $('#newquestionid').val(questionid);
                                    if(questionid != '')  
                                   {  
                                        $.ajax({  
                                        url:"/api/admin/getquestiondata",  
                                        method:"POST",
                                        headers: {"Authorization": 'Bearer ' + localStorage.getItem('jwt')}, 
                                        data:{'questionid':questionid},  
                                        dataType:"json",  
                                        success:function(data){ 
                                             $('#newquestionid').val(data[0].id); 
                                             $('#newquizid').val(data[0].quizid);  
                                             $('#newcorrectanswer').val(data[0].correctanswer);
                                             $('#newquestionnumber').val(data[0].questionnumber);
                                             $('#newdescription').val(data[0].description);    
                                             $('#insert').val("Update");  
                                             $('#add_data_Modal').modal('show'); 					 
                                        }  
                                   });  
                                   }
                                    
                            });
                                  
                         
                         </script>
                    </body></html>